{
  "$schema": "https://raw.githubusercontent.com/AppThreat/purl4ml/refs/heads/main/schemas/purl-type-extended-definition.schema.json",
  "$id": "https://packageurl.org/types/nuget-extended-definition.json",
  "type": "nuget",
  "type_name": "NuGet",
  "description": "NuGet .NET packages",
  "uri_compliance": {
    "name_encoding": "lowercase",
    "version_encoding": "verbatim"
  },
  "repository": {
    "use_repository": true,
    "default_repository_url": "https://www.nuget.org",
    "supported_repositories": [
      "https://www.nuget.org",
      "https://api.nuget.org/v3/index.json"
    ],
    "note": "NuGet packages are hosted on the official NuGet gallery"
  },
  "namespace_definition": {
    "requirement": "prohibited",
    "note": "there is no namespace"
  },
  "name_definition": {
    "requirement": "required",
    "case_sensitive": false,
    "encoding": "lowercase",
    "native_name": "package id",
    "note": "Technically the name is case-preserving, but case-insensitive, and NuGet packages archives are case-preserving, while some NuGet API calls demand to lowercase the package name. For consistency, package names should be lowercased in PURLs."
  },
  "version_definition": {
    "requirement": "required",
    "encoding": "verbatim",
    "native_name": "version",
    "note": "The NuGet version is semver-like but may contain more than three segments"
  },
  "validation_rules": {
    "name": {
      "case_insensitive": true,
      "lowercase_required": true,
      "examples_valid": ["enterpriselibrary.common", "newtonsoft.json", "microsoft.aspnetcore.mvc"],
      "examples_invalid": ["", "EnterpriseLibrary.Common", "package name"]
    },
    "version": {
      "format": "nuget-version",
      "semver_like": true,
      "examples_valid": ["6.0.1304", "1.0.0", "2.1.0-preview-final"],
      "examples_invalid": ["", "latest", "v6.0.1304"]
    }
  },
  "common_patterns": [
    {
      "pattern": "pkg:nuget/{name}@{version}",
      "description": "Standard NuGet package reference",
      "example": "pkg:nuget/enterpriselibrary.common@6.0.1304"
    }
  ],
  "anti_patterns": [
    "pkg:nuget/namespace/EnterpriseLibrary.Common@6.0.1304",
    "pkg:nuget/EnterpriseLibrary.Common@6.0.1304",
    "pkg:nuget/enterpriselibrary.common",
    "pkg:nuget/enterpriselibrary.common@",
    "pkg:nuget/"
  ],
  "parsing_decision_tree": {
    "steps": [
      {
        "question": "Is there a namespace component?",
        "yes": "Invalid PURL - namespace is prohibited for nuget",
        "no": "Proceed with name parsing"
      },
      {
        "question": "Is there a package name component?",
        "yes": "Extract the name (component after pkg:nuget/)",
        "no": "Invalid PURL - name is required for nuget"
      },
      {
        "question": "Is there a version component?",
        "yes": "Extract everything after @ as version",
        "no": "Invalid PURL - version is required for nuget"
      },
      {
        "question": "Are there qualifiers?",
        "yes": "Parse key=value pairs after ?",
        "no": "No qualifiers present"
      }
    ]
  },
  "context": {
    "ecosystem": ".NET",
    "package_manager": "NuGet",
    "url_scheme": "pkg",
    "hierarchical_structure": "pkg:nuget/{name}@{version}?{qualifiers}",
    "versioning_system": "NuGet versioning (SemVer-like with possible additional segments)",
    "naming_convention": "Dot-separated names that may appear namespace-like but are not",
    "repository_model": "Centralized with NuGet Gallery as default"
  },
  "edge_cases": [
    {
      "case": "Case sensitivity in package names",
      "handling": "Package names are case-insensitive but should be lowercased in PURLs",
      "purl_impact": "Ensures consistent representation despite case-insensitive nature"
    },
    {
      "case": "Pre-release versions",
      "handling": "Pre-release versions follow SemVer conventions with hyphen and identifier",
      "purl_impact": "Preserves pre-release status in version string"
    }
  ],
  "llm_guidance": {
    "do_not_assume": [
      "NuGet packages have namespaces",
      "Package names are case-sensitive",
      "Version can be omitted",
      "Package names can contain spaces",
      "All packages follow standard SemVer"
    ],
    "key_facts_to_remember": [
      "Namespace is prohibited for nuget packages",
      "Package name is required and should be lowercased in PURLs",
      "Version is required and follows NuGet versioning (SemVer-like)",
      "Dot-separated names are not namespaces but part of the package name",
      "Versions may contain more than three segments"
    ],
    "common_mistakes_to_avoid": [
      "Adding a namespace component",
      "Using uppercase letters in package names",
      "Omitting the required version component",
      "Using 'latest' as version (not a specific version)",
      "Treating dot-separated names as namespaces"
    ]
  },
  "examples": [
    {
      "purl": "pkg:nuget/enterpriselibrary.common@6.0.1304",
      "description": "Enterprise Library Common package"
    },
    {
      "purl": "pkg:nuget/newtonsoft.json@13.0.1",
      "description": "Newtonsoft JSON serializer package"
    },
    {
      "purl": "pkg:nuget/microsoft.aspnetcore.mvc@2.1.0-preview-final",
      "description": "ASP.NET Core MVC pre-release package"
    }
  ],
  "incorrect_examples": [
    {
      "purl": "pkg:nuget/namespace/EnterpriseLibrary.Common@6.0.1304",
      "description": "Includes namespace component - namespace is prohibited for nuget",
      "violation": "namespace_definition.requirement=prohibited"
    },
    {
      "purl": "pkg:nuget/EnterpriseLibrary.Common@6.0.1304",
      "description": "Package name with uppercase letters - should be lowercased",
      "violation": "name_definition.encoding=lowercase"
    },
    {
      "purl": "pkg:nuget/enterpriselibrary.common",
      "description": "Missing version component - version is required for nuget",
      "violation": "version_definition.requirement=required"
    },
    {
      "purl": "pkg:nuget/enterpriselibrary.common@",
      "description": "Empty version component - version cannot be empty",
      "violation": "version_definition requires a valid version"
    },
    {
      "purl": "pkg:nuget/",
      "description": "Missing package name component - name is required for nuget",
      "violation": "name_definition.requirement=required"
    }
  ],
  "note": "There is no namespace per se even if the common convention is to use dot-separated package names where the first segment is namespace-like.",
  "references": [
    {
      "title": "NuGet Documentation",
      "url": "https://docs.microsoft.com/en-us/nuget/"
    },
    {
      "title": "NuGet Package Versioning",
      "url": "https://docs.microsoft.com/en-us/nuget/concepts/package-versioning"
    },
    {
      "title": "NuGet Gallery",
      "url": "https://www.nuget.org/"
    }
  ],
  "metadata": {
    "last_updated": "2025-08-16"
  }
}