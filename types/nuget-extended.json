{
  "$schema": "https://raw.githubusercontent.com/AppThreat/purl4ml/refs/heads/main/schemas/purl-type-extended-definition.schema.json",
  "$id": "https://packageurl.org/types/nuget-extended-definition.json",
  "type": "nuget",
  "type_name": "NuGet",
  "description": "NuGet .NET packages",
  "uri_compliance": {
    "name_encoding": "verbatim",
    "version_encoding": "verbatim"
  },
  "repository": {
    "use_repository": true,
    "default_repository_url": "https://www.nuget.org",
    "note": "NuGet packages are hosted on the official NuGet gallery. Private or alternative repositories can be specified using the 'repository_url' qualifier."
  },
  "namespace_definition": {
    "requirement": "prohibited",
    "note": "NuGet does not have a namespace concept. Dot-separated names are part of the package name, not a namespace."
  },
  "name_definition": {
    "requirement": "required",
    "case_sensitive": true,
    "native_name": "package id",
    "note": "Technically the name is case-perserving, but case-insensitive, and NuGet packages archives are case-perserving, while some NuGet API calls demand to lowercase the package name."
  },
  "version_definition": {
    "requirement": "required",
    "encoding": "verbatim",
    "native_name": "version",
    "note": "The NuGet version is SemVer-like but may contain a fourth integer segment (Major.Minor.Patch.Revision)."
  },
  "qualifiers_definition": [
    {
      "key": "repository_url",
      "requirement": "optional",
      "description": "The URL of the repository where the package can be found.",
      "examples": [
        "pkg:nuget/My.Private.Package@1.0.0?repository_url=https://nuget.mycompany.com/v3/index.json"
      ]
    }
  ],
  "validation_rules": {
    "name": {
      "examples_valid": [
        "EnterpriseLibrary.Common",
        "Newtonsoft.Json",
        "Microsoft.AspNetCore.Mvc"
      ],
      "examples_invalid": [
        "",
        "package name"
      ]
    },
    "version": {
      "format": "nuget-version",
      "semver_like": true,
      "examples_valid": [
        "6.0.1304",
        "13.0.1",
        "2.1.0-preview-final",
        "1.2.3.4"
      ],
      "examples_invalid": [
        "",
        "latest",
        "v6.0.1304"
      ]
    }
  },
  "common_patterns": [
    {
      "pattern": "pkg:nuget/{name}@{version}",
      "description": "Standard NuGet package reference from the default repository.",
      "example": "pkg:nuget/EnterpriseLibrary.Common@6.0.1304"
    }
  ],
  "parsing_decision_tree": {
    "steps": [
      {
        "question": "Is there a namespace component?",
        "yes": "Invalid PURL - namespace is prohibited for nuget.",
        "no": "Proceed."
      },
      {
        "question": "Is there a package name component?",
        "yes": "Extract the name, preserving its case.",
        "no": "Invalid PURL - name is required."
      },
      {
        "question": "Is there a version component?",
        "yes": "Extract everything after @ as version.",
        "no": "Invalid PURL - version is required."
      },
      {
        "question": "Are there qualifiers?",
        "yes": "Parse key=value pairs after ?. Validate supported qualifiers like 'repository_url'.",
        "no": "No qualifiers present."
      }
    ]
  },
  "context": {
    "ecosystem": ".NET",
    "package_manager": "NuGet",
    "versioning_system": "NuGet versioning (SemVer-like with an optional fourth revision number)",
    "naming_convention": "Dot-separated, case-preserving names that are not namespaces.",
    "repository_model": "Centralized default (NuGet Gallery) with support for private/alternative repositories."
  },
  "edge_cases": [
    {
      "case": "Case sensitivity in package names",
      "handling": "Package names are case-insensitive for resolution in the NuGet ecosystem, but are case-preserving in metadata. The casing in the PURL should reflect the canonical casing as published by the author.",
      "purl_impact": "Ensures fidelity with the ecosystem's canonical representation. Two PURLs with different casing for the same name refer to the same package but are not identical PURLs."
    }
  ],
  "llm_guidance": {
    "key_facts_to_remember": [
      "Namespace is prohibited.",
      "Package name is required and is case-preserving. The canonical casing should be used.",
      "Version is required and follows NuGet versioning (can be four parts).",
      "Dot-separated names are part of the name, not a namespace.",
      "Use the 'repository_url' qualifier for packages not on the public NuGet gallery."
    ],
    "common_mistakes_to_avoid": [
      "Adding a namespace.",
      "Incorrectly lowercasing the entire package name.",
      "Omitting the required version.",
      "Splitting the package name at dots as if it were a namespace."
    ]
  },
  "examples": [
    {
      "purl": "pkg:nuget/EnterpriseLibrary.Common@6.0.1304",
      "description": "Standard Enterprise Library Common package."
    },
    {
      "purl": "pkg:nuget/Newtonsoft.Json@13.0.1",
      "description": "Newtonsoft JSON serializer package."
    },
    {
      "purl": "pkg:nuget/Microsoft.AspNetCore.Mvc@2.1.0-preview-final",
      "description": "ASP.NET Core MVC pre-release package."
    }
  ],
  "incorrect_examples": [
    {
      "purl": "pkg:nuget/namespace/name@1.0",
      "description": "Contains a namespace component, which is prohibited.",
      "violation": "namespace_definition.requirement=prohibited"
    },
    {
      "purl": "pkg:nuget/Newtonsoft.Json",
      "description": "Missing the required version component.",
      "violation": "version_definition.requirement=required"
    },
    {
      "purl": "pkg:nuget/Newtonsoft.Json@",
      "description": "Contains an empty version component.",
      "violation": "version must be a non-empty string"
    }
  ],
  "references": [
    {
      "title": "NuGet Documentation",
      "url": "https://docs.microsoft.com/en-us/nuget/"
    },
    {
      "title": "NuGet Package Versioning",
      "url": "https://docs.microsoft.com/en-us/nuget/concepts/package-versioning"
    },
    {
      "title": "NuGet Gallery",
      "url": "https://www.nuget.org/"
    }
  ],
  "metadata": {
    "last_updated": "2025-08-23"
  }
}
