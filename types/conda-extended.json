{
  "$schema": "https://raw.githubusercontent.com/AppThreat/purl4ml/refs/heads/main/schemas/purl-type-extended-definition.schema.json",
  "$id": "https://packageurl.org/types/conda-extended-definition.json",
  "type": "conda",
  "type_name": "Conda",
  "description": "conda is for Conda packages",
  "uri_compliance": {
    "name_encoding": "verbatim",
    "version_encoding": "verbatim"
  },
  "repository": {
    "use_repository": true,
    "default_repository_url": "https://repo.anaconda.com",
    "supported_repositories": [
      "https://repo.anaconda.com",
      "https://conda.anaconda.org",
      "https://anaconda.org"
    ],
    "note": "Conda packages are hosted on Anaconda repositories"
  },
  "namespace_definition": {
    "requirement": "prohibited",
    "note": "there is no namespace"
  },
  "name_definition": {
    "requirement": "required",
    "encoding": "verbatim",
    "native_name": "name",
    "note": "The name is the package name."
  },
  "version_definition": {
    "requirement": "required",
    "encoding": "verbatim",
    "native_name": "version",
    "note": "The version is the package version."
  },
  "qualifiers_definition": [
    {
      "key": "build",
      "requirement": "optional",
      "description": "The build string.",
      "examples": ["py36h06a4308_0", "py37h7b6447c_0", "0"]
    },
    {
      "key": "channel",
      "requirement": "optional",
      "description": "The package stored location.",
      "examples": ["main", "conda-forge", "defaults", "bioconda"]
    },
    {
      "key": "subdir",
      "requirement": "optional",
      "description": "The associated platform.",
      "examples": ["linux-64", "osx-64", "win-64", "noarch"]
    },
    {
      "key": "type",
      "requirement": "optional",
      "description": "Package type.",
      "examples": ["tar.bz2", "conda"]
    }
  ],
  "validation_rules": {
    "name": {
      "examples_valid": ["absl-py", "numpy", "python", "scipy"],
      "examples_invalid": ["", "absl py", "absl@py"]
    },
    "version": {
      "format": "conda-version",
      "examples_valid": ["0.4.1", "1.20.3", "3.9.7"],
      "examples_invalid": ["", "latest", "v0.4.1"]
    }
  },
  "common_patterns": [
    {
      "pattern": "pkg:conda/{name}@{version}?build={build}&channel={channel}&subdir={subdir}&type={type}",
      "description": "Standard Conda package with all qualifiers",
      "example": "pkg:conda/absl-py@0.4.1?build=py36h06a4308_0&channel=main&subdir=linux-64&type=tar.bz2"
    },
    {
      "pattern": "pkg:conda/{name}@{version}?subdir={subdir}",
      "description": "Conda package with platform only",
      "example": "pkg:conda/python@3.9.7?subdir=linux-64"
    }
  ],
  "anti_patterns": [
    "pkg:conda/namespace/absl-py@0.4.1",
    "pkg:conda/absl-py",
    "pkg:conda/absl-py@",
    "pkg:conda/absl-py@0.4.1?build=",
    "pkg:conda/"
  ],
  "parsing_decision_tree": {
    "steps": [
      {
        "question": "Is there a namespace component?",
        "yes": "Invalid PURL - namespace is prohibited for conda",
        "no": "Proceed with name parsing"
      },
      {
        "question": "Is there a name component?",
        "yes": "Extract the name (component after pkg:conda/)",
        "no": "Invalid PURL - name is required for conda"
      },
      {
        "question": "Is there a version component?",
        "yes": "Extract everything after @ as version",
        "no": "Invalid PURL - version is required for conda"
      },
      {
        "question": "Are there qualifiers?",
        "yes": "Parse key=value pairs after ?",
        "no": "No qualifiers present"
      }
    ]
  },
  "context": {
    "ecosystem": "Python/R/other languages",
    "package_manager": "Conda",
    "url_scheme": "pkg",
    "hierarchical_structure": "pkg:conda/{name}@{version}?{qualifiers}",
    "versioning_system": "Conda-specific versioning",
    "platform_support": "Multiple platforms via subdir qualifier",
    "repository_model": "Centralized with Anaconda repositories"
  },
  "edge_cases": [
    {
      "case": "Packages without build string",
      "handling": "Build qualifier is optional and can be omitted",
      "purl_impact": "Simplifies PURLs when build information is not needed"
    },
    {
      "case": "Noarch packages",
      "handling": "Use subdir=noarch for architecture-independent packages",
      "purl_impact": "Indicates the package works on any platform"
    },
    {
      "case": "Multiple channels",
      "handling": "Channel qualifier specifies which repository channel to use",
      "purl_impact": "Allows disambiguation when same package exists in multiple channels"
    }
  ],
  "llm_guidance": {
    "do_not_assume": [
      "Conda packages have namespaces",
      "Package names can contain spaces or special characters",
      "Version is optional",
      "All qualifiers are required",
      "All packages use the same platform"
    ],
    "key_facts_to_remember": [
      "Namespace is prohibited for conda packages",
      "Package name is required",
      "Version is required",
      "Build, channel, subdir, and type are optional qualifiers",
      "Platform is specified via subdir qualifier"
    ],
    "common_mistakes_to_avoid": [
      "Adding a namespace component",
      "Omitting the required version component",
      "Using invalid characters in package names",
      "Confusing conda with other package managers",
      "Forgetting to specify platform when relevant"
    ]
  },
  "examples": [
    {
      "purl": "pkg:conda/absl-py@0.4.1?build=py36h06a4308_0&channel=main&subdir=linux-64&type=tar.bz2",
      "description": "Abseil Python package with full qualifiers"
    },
    {
      "purl": "pkg:conda/numpy@1.20.3?subdir=linux-64",
      "description": "NumPy package with platform only"
    },
    {
      "purl": "pkg:conda/python@3.9.7?build=h70747c6_1&channel=defaults&subdir=osx-64",
      "description": "Python package for macOS"
    }
  ],
  "incorrect_examples": [
    {
      "purl": "pkg:conda/namespace/absl-py@0.4.1",
      "description": "Includes namespace component - namespace is prohibited for conda",
      "violation": "namespace_definition.requirement=prohibited"
    },
    {
      "purl": "pkg:conda/absl-py",
      "description": "Missing version component - version is required for conda",
      "violation": "version_definition.requirement=required"
    },
    {
      "purl": "pkg:conda/absl-py@",
      "description": "Empty version component - version cannot be empty",
      "violation": "version_definition requires a valid version"
    },
    {
      "purl": "pkg:conda/absl-py@0.4.1?build=",
      "description": "Empty build qualifier - if provided, build must have a value",
      "violation": "qualifiers_definition.build requires a value when present"
    },
    {
      "purl": "pkg:conda/",
      "description": "Missing package name component - name is required for conda",
      "violation": "name_definition.requirement=required"
    }
  ],
  "references": [
    {
      "title": "Conda Documentation",
      "url": "https://docs.conda.io/"
    },
    {
      "title": "Anaconda Repository",
      "url": "https://repo.anaconda.com"
    },
    {
      "title": "Conda Package Specification",
      "url": "https://conda.io/docs/user-guide/tasks/manage-pkgs.html"
    }
  ],
  "metadata": {
    "last_updated": "2025-08-16"
  }
}