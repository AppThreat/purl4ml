{
  "$schema": "https://raw.githubusercontent.com/AppThreat/purl4ml/refs/heads/main/schemas/purl-type-extended-definition.schema.json",
  "$id": "https://packageurl.org/types/mlflow-extended-definition.json",
  "type": "mlflow",
  "type_name": "MLflow ML models",
  "description": "MLflow ML models (Azure ML, Databricks, etc.)",
  "uri_compliance": {
    "name_encoding": "verbatim",
    "version_encoding": "verbatim"
  },
  "repository": {
    "use_repository": true,
    "note": "The repository is the MLflow tracking URI. There is no default. Some examples include Azure ML https://<region>.api.azureml.ms/mlflow/v1.0/subscriptions/<subscription-id>/resourceGroups/<resource-group-name>/providers/Microsoft.MachineLearningServices/workspaces/<workspace-name> and Azure Databricks https://adb-<numbers>.<number>.azuredatabricks.net/api/2.0/mlflow and AWS Databricks https://dbc-<alphanumeric>-<alphanumeric>.cloud.databricks.com/api/2.0/mlflow and GCP Databricks https://<numbers>.<number>.gcp.databricks.com/api/2.0/mlflow",
    "supported_qualifiers": [
      "repository_url"
    ]
  },
  "namespace_definition": {
    "requirement": "prohibited",
    "note": "there is no namespace"
  },
  "name_definition": {
    "requirement": "required",
    "encoding": "verbatim",
    "native_name": "model name",
    "note": "The name is the model name. Case sensitivity depends on the server implementation, such as for Azure ML, it is case sensitive and must be kept as-is in the package URL; and for Databricks, it is case insensitive and must be lowercased in the package URL."
  },
  "version_definition": {
    "requirement": "required",
    "encoding": "verbatim",
    "native_name": "version",
    "note": "The version is the model version."
  },
  "qualifiers_definition": [
    {
      "key": "model_uuid",
      "requirement": "optional",
      "native_name": "model_uuid",
      "description": "model_uuid as defined in the MLflow documentation.",
      "examples": ["36233173b22f4c89b451f1228d700d49"]
    },
    {
      "key": "run_id",
      "requirement": "optional",
      "native_name": "run_id",
      "description": "run_id as defined in the MLflow documentation.",
      "examples": ["410a3121-2709-4f88-98dd-dba0ef056b0a"]
    },
    {
      "key": "repository_url",
      "requirement": "optional",
      "description": "The MLflow tracking URI. Required qualifier since there is no default repository.",
      "examples": [
        "https://westus2.api.azureml.ms/mlflow/v1.0/subscriptions/a50f2011-fab8-4164-af23-c62881ef8c95/resourceGroups/TestResourceGroup/providers/Microsoft.MachineLearningServices/workspaces/TestWorkspace",
        "https://adb-5245952564735461.0.azuredatabricks.net/api/2.0/mlflow"
      ]
    }
  ],
  "validation_rules": {
    "name": {
      "examples_valid": ["creditfraud", "trafficsigns", "MyModel"],
      "examples_invalid": ["", "model/name", "model@name"]
    },
    "version": {
      "examples_valid": ["3", "10", "1.0"],
      "examples_invalid": ["", "latest", "v3"]
    }
  },
  "common_patterns": [
    {
      "pattern": "pkg:mlflow/{name}@{version}?repository_url={url}",
      "description": "MLflow model with repository URL",
      "example": "pkg:mlflow/creditfraud@3?repository_url=https://westus2.api.azureml.ms/mlflow/v1.0/subscriptions/a50f2011-fab8-4164-af23-c62881ef8c95/resourceGroups/TestResourceGroup/providers/Microsoft.MachineLearningServices/workspaces/TestWorkspace"
    },
    {
      "pattern": "pkg:mlflow/{name}@{version}?model_uuid={uuid}&run_id={id}&repository_url={url}",
      "description": "MLflow model with UUID, run ID, and repository URL",
      "example": "pkg:mlflow/trafficsigns@10?model_uuid=36233173b22f4c89b451f1228d700d49&run_id=410a3121-2709-4f88-98dd-dba0ef056b0a&repository_url=https://adb-5245952564735461.0.azuredatabricks.net/api/2.0/mlflow"
    }
  ],
  "anti_patterns": [
    "pkg:mlflow/namespace/creditfraud@3?repository_url=https://...",
    "pkg:mlflow/creditfraud@latest?repository_url=https://...",
    "pkg:mlflow/creditfraud@3",
    "pkg:mlflow/creditfraud@3?repository_url=",
    "pkg:mlflow/"
  ],
  "parsing_decision_tree": {
    "steps": [
      {
        "question": "Is there a namespace component?",
        "yes": "Invalid PURL - namespace is prohibited for mlflow",
        "no": "Proceed with name parsing"
      },
      {
        "question": "Is there a model name component?",
        "yes": "Extract the name (component after pkg:mlflow/)",
        "no": "Invalid PURL - name is required for mlflow"
      },
      {
        "question": "Is there a version component?",
        "yes": "Extract everything after @ as version",
        "no": "Invalid PURL - version is required for mlflow"
      },
      {
        "question": "Is there a repository_url qualifier?",
        "yes": "Extract the repository URL",
        "no": "Invalid PURL - repository_url is required for mlflow"
      },
      {
        "question": "Are there other qualifiers?",
        "yes": "Parse additional key=value pairs",
        "no": "No additional qualifiers present"
      }
    ]
  },
  "context": {
    "ecosystem": "Machine Learning",
    "package_manager": "MLflow",
    "url_scheme": "pkg",
    "hierarchical_structure": "pkg:mlflow/{name}@{version}?{qualifiers}",
    "versioning_system": "Numeric model versions",
    "platform_support": "Azure ML, Databricks (Azure, AWS, GCP)",
    "repository_model": "No default repository, repository_url qualifier is required"
  },
  "edge_cases": [
    {
      "case": "Case sensitivity in model names",
      "handling": "Case sensitivity depends on server implementation (Azure ML: case-sensitive, Databricks: case-insensitive)",
      "purl_impact": "Model names should be preserved as-is for Azure ML, lowercased for Databricks"
    },
    {
      "case": "Multiple MLflow platforms",
      "handling": "Use repository_url qualifier to specify the MLflow tracking URI",
      "purl_impact": "Enables referencing models from different MLflow implementations"
    },
    {
      "case": "Models with UUID and run ID",
      "handling": "Use model_uuid and run_id qualifiers for additional identification",
      "purl_impact": "Provides more specific identification of model versions"
    }
  ],
  "llm_guidance": {
    "do_not_assume": [
      "MLflow models have namespaces",
      "Model names are always case-sensitive or always case-insensitive",
      "Version can be omitted",
      "There is a default repository",
      "Repository URL is optional"
    ],
    "key_facts_to_remember": [
      "Namespace is prohibited for mlflow models",
      "Model name is required and case sensitivity depends on platform",
      "Version is required and is typically numeric",
      "Repository_url qualifier is required since there is no default repository",
      "Model UUID and run ID are optional qualifiers for additional identification"
    ],
    "common_mistakes_to_avoid": [
      "Adding a namespace component",
      "Omitting the required version component",
      "Forgetting to include the repository_url qualifier",
      "Using 'latest' as version (not a specific version)",
      "Assuming consistent case sensitivity across platforms"
    ]
  },
  "examples": [
    {
      "purl": "pkg:mlflow/creditfraud@3?repository_url=https://westus2.api.azureml.ms/mlflow/v1.0/subscriptions/a50f2011-fab8-4164-af23-c62881ef8c95/resourceGroups/TestResourceGroup/providers/Microsoft.MachineLearningServices/workspaces/TestWorkspace",
      "description": "Credit fraud model from Azure ML"
    },
    {
      "purl": "pkg:mlflow/trafficsigns@10?model_uuid=36233173b22f4c89b451f1228d700d49&run_id=410a3121-2709-4f88-98dd-dba0ef056b0a&repository_url=https://adb-5245952564735461.0.azuredatabricks.net/api/2.0/mlflow",
      "description": "Traffic signs model from Azure Databricks with UUID and run ID"
    }
  ],
  "incorrect_examples": [
    {
      "purl": "pkg:mlflow/namespace/creditfraud@3?repository_url=https://...",
      "description": "Includes namespace component - namespace is prohibited for mlflow",
      "violation": "namespace_definition.requirement=prohibited"
    },
    {
      "purl": "pkg:mlflow/creditfraud@latest?repository_url=https://...",
      "description": "Non-specific version - 'latest' is not a valid MLflow version",
      "violation": "version_definition requires a specific version"
    },
    {
      "purl": "pkg:mlflow/creditfraud@3",
      "description": "Missing repository_url qualifier - repository_url is required for mlflow",
      "violation": "qualifiers_definition.repository_url is required"
    },
    {
      "purl": "pkg:mlflow/creditfraud@3?repository_url=",
      "description": "Empty repository_url qualifier - repository_url must have a value",
      "violation": "qualifiers_definition.repository_url requires a value"
    },
    {
      "purl": "pkg:mlflow/",
      "description": "Missing model name component - name is required for mlflow",
      "violation": "name_definition.requirement=required"
    }
  ],
  "references": [
    {
      "title": "MLflow Documentation",
      "url": "https://mlflow.org/docs/latest/index.html"
    },
    {
      "title": "Azure ML MLflow",
      "url": "https://docs.microsoft.com/en-us/azure/machine-learning/how-to-use-mlflow"
    },
    {
      "title": "Databricks MLflow",
      "url": "https://docs.databricks.com/applications/mlflow/index.html"
    }
  ],
  "metadata": {
    "last_updated": "2025-08-16"
  }
}