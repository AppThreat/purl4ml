{
  "$schema": "https://raw.githubusercontent.com/AppThreat/purl4ml/refs/heads/main/schemas/purl-type-extended-definition.schema.json",
  "$id": "https://packageurl.org/types/swift-extended-definition.json",
  "type": "swift",
  "type_name": "Swift packages",
  "description": "Swift Package Manager (SwiftPM) packages, typically resolved from a Git repository URL.",
  "uri_compliance": {
    "namespace_encoding": "verbatim",
    "name_encoding": "verbatim",
    "version_encoding": "verbatim"
  },
  "repository": {
    "use_repository": true,
    "note": "There is no default package repository. The location is derived directly from the namespace, which contains the repository host and user/organization path."
  },
  "namespace_definition": {
    "requirement": "required",
    "case_sensitive": true,
    "encoding": "verbatim",
    "native_name": "source host and user/organization path",
    "note": "The namespace consists of all path segments that precede the final segment (the name). It typically includes the source code host and the user, organization, or group path. The host portion should be lowercased."
  },
  "name_definition": {
    "requirement": "required",
    "case_sensitive": true,
    "encoding": "verbatim",
    "native_name": "repository name",
    "note": "The name is the last path segment of the package identifier and corresponds to the repository name."
  },
  "version_definition": {
    "requirement": "required",
    "case_sensitive": true,
    "encoding": "verbatim",
    "native_name": "package version",
    "note": "The version is required and typically corresponds to a Git tag. A leading 'v' should be stripped for canonical representation."
  },
  "validation_rules": {
    "namespace": {
      "case_sensitive": true,
      "examples_valid": ["github.com/Alamofire", "github.com/RxSwiftCommunity", "gitlab.com/my-org/ui-components"],
      "examples_invalid": [""]
    },
    "name": {
      "case_sensitive": true,
      "examples_valid": ["Alamofire", "RxFlow", "buttons"],
      "examples_invalid": [""]
    },
    "version": {
      "format": "semver",
      "examples_valid": ["5.4.3", "2.12.4", "1.0.0-beta.1"],
      "examples_invalid": ["", "latest", "v5.4.3"]
    }
  },
  "common_patterns": [
    {
      "pattern": "pkg:swift/{host}/{organization}/{repository_name}@{version}",
      "description": "Standard Swift package reference from a repository.",
      "example": "pkg:swift/github.com/Alamofire/Alamofire@5.4.3"
    },
    {
      "pattern": "pkg:swift/{host}/{group}/{subgroup}/{repository_name}@{version}",
      "description": "Swift package from a repository in a subgroup (e.g., on GitLab).",
      "example": "pkg:swift/gitlab.com/my-org/ui-components/buttons@1.2.0"
    }
  ],
  "anti_patterns": [
    "pkg:swift/github.com/Alamofire/alamofire@5.4.3",
    "pkg:swift/github.com/Alamofire/Alamofire",
    "pkg:swift/github.com/Alamofire/Alamofire@",
    "pkg:swift/Alamofire/Alamofire@5.4.3?repository_url=https://github.com"
  ],
  "parsing_decision_tree": {
    "steps": [
      {
        "question": "Are there at least two path segments before the '@' symbol?",
        "yes": "The last segment is the 'name'. All preceding segments form the 'namespace'.",
        "no": "Invalid PURL - at least two segments (namespace + name) are required."
      },
      {
        "question": "Is there a version component present and not empty?",
        "yes": "Extract the version string.",
        "no": "Invalid PURL - version is required."
      },
      {
        "question": "Are there any qualifiers?",
        "yes": "Invalid PURL - qualifiers are not typically used for the swift type.",
        "no": "PURL is valid."
      }
    ]
  },
  "context": {
    "ecosystem": "Swift",
    "package_manager": "Swift Package Manager (SwiftPM)",
    "repository_model": "Distributed, location derived from namespace."
  },
  "edge_cases": [
    {
      "case": "Repositories in subgroups (e.g., GitLab)",
      "handling": "The namespace correctly includes all parent groups (e.g., 'gitlab.com/group/subgroup').",
      "purl_impact": "Allows for unambiguous identification of packages regardless of repository nesting depth."
    }
  ],
  "examples": [
    {
      "purl": "pkg:swift/github.com/Alamofire/Alamofire@5.4.3",
      "description": "Alamofire HTTP networking library from GitHub."
    },
    {
      "purl": "pkg:swift/gitlab.com/my-org/ui-components/buttons@1.2.0",
      "description": "A package located in a subgroup on GitLab."
    }
  ],
  "incorrect_examples": [
    {
      "purl": "pkg:swift/github.com/Alamofire/alamofire@5.4.3",
      "description": "Incorrect case for the 'name' component.",
      "violation": "name_definition.case_sensitive=true"
    },
    {
      "purl": "pkg:swift/github.com/Alamofire/Alamofire",
      "description": "Missing required version component.",
      "violation": "version_definition.requirement=required"
    },
    {
      "purl": "pkg:swift/Alamofire@5.4.3",
      "description": "Missing namespace. A source host and user/org is required.",
      "violation": "namespace_definition.requirement=required"
    }
  ],
  "references": [
    {
      "title": "Swift Package Manager Documentation",
      "url": "https://www.swift.org/package-manager/"
    },
    {
      "title": "Creating Swift Packages",
      "url": "https://docs.swift.org/package-manager/PackageDescription/PackageDescription.html"
    },
    {
      "title": "Swift Package Dependencies",
      "url": "https://docs.swift.org/package-manager/dependencies.html"
    }
  ],
  "metadata": {
    "last_updated": "2025-08-23"
  }
}