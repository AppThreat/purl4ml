{
  "$schema": "https://raw.githubusercontent.com/AppThreat/purl4ml/refs/heads/main/schemas/purl-type-extended-definition.schema.json",
  "$id": "https://packageurl.org/types/hackage-extended-definition.json",
  "type": "hackage",
  "type_name": "Haskell package",
  "description": "Haskell packages",
  "uri_compliance": {
    "name_encoding": "verbatim",
    "version_encoding": "verbatim"
  },
  "repository": {
    "use_repository": true,
    "default_repository_url": "https://hackage.haskell.org",
    "supported_repositories": [
      "https://hackage.haskell.org"
    ],
    "note": "Haskell packages are hosted on Hackage."
  },
  "namespace_definition": {
    "requirement": "prohibited",
    "note": "There is no namespace for Hackage packages."
  },
  "name_definition": {
    "requirement": "required",
    "case_sensitive": true,
    "encoding": "verbatim",
    "native_name": "name",
    "normalization_rules": [
      "Apply kebab-case"
    ],
    "note": "The name is the package name. It is case-sensitive and MUST be normalized to kebab-case (using hyphens as separators)."
  },
  "version_definition": {
    "requirement": "required",
    "encoding": "verbatim",
    "native_name": "version",
    "note": "The version is the package version."
  },
  "validation_rules": {
    "name": {
      "case_sensitive": true,
      "kebab_case_required": true,
      "examples_valid": ["a50", "AC-HalfInteger", "3d-graphics-examples"],
      "examples_invalid": ["a_50", "AC_HalfInteger", "3dGraphicsExamples"]
    },
    "version": {
      "format": "hackage-version",
      "examples_valid": ["0.5", "1.2.1", "0.0.0.2"],
      "examples_invalid": ["latest", "v0.5"]
    }
  },
  "common_patterns": [
    {
      "pattern": "pkg:hackage/{name}@{version}",
      "description": "Standard Hackage package reference.",
      "example": "pkg:hackage/a50@0.5"
    }
  ],
  "anti_patterns": [
    "pkg:hackage/namespace/a50@0.5",
    "pkg:hackage/a_50@0.5",
    "pkg:hackage/a50",
    "pkg:hackage/a50@",
    "pkg:hackage/"
  ],
  "parsing_decision_tree": {
    "steps": [
      {
        "question": "Is there a namespace component?",
        "yes": "Invalid PURL - namespace is prohibited for hackage",
        "no": "Proceed with name parsing"
      },
      {
        "question": "Is the name in valid kebab-case?",
        "yes": "Extract the name.",
        "no": "Invalid PURL - name must be in kebab-case."
      },
      {
        "question": "Is there a version component?",
        "yes": "Extract everything after @ as version",
        "no": "Invalid PURL - version is required for hackage"
      }
    ]
  },
  "context": {
    "ecosystem": "Haskell",
    "package_manager": "Cabal",
    "url_scheme": "pkg",
    "hierarchical_structure": "pkg:hackage/{name}@{version}",
    "versioning_system": "Hackage versioning",
    "naming_convention": "Package names are case-sensitive and must be normalized to kebab-case."
  },
  "edge_cases": [
    {
      "case": "Package names starting with numbers",
      "handling": "Package names can validly start with a number, provided they follow kebab-case.",
      "purl_impact": "e.g., 'pkg:hackage/3d-graphics-examples@...'"
    },
    {
      "case": "Case sensitivity in names",
      "handling": "Package names are case-sensitive. 'AC-HalfInteger' and 'ac-halfinteger' are considered different packages.",
      "purl_impact": "The exact case of the name component must be preserved."
    }
  ],
  "llm_guidance": {
    "do_not_assume": [
      "Hackage packages have namespaces.",
      "Package names can be in any format like snake_case or camelCase.",
      "Version can be omitted."
    ],
    "key_facts_to_remember": [
      "Namespace is prohibited.",
      "Package name is required, is case-sensitive, and must be normalized to kebab-case.",
      "Version is required.",
      "Package names can start with numbers."
    ],
    "common_mistakes_to_avoid": [
      "Adding a namespace component.",
      "Failing to normalize the package name to kebab-case (e.g., using underscores).",
      "Omitting the required version component.",
      "Changing the case of a package name."
    ]
  },
  "examples": [
    {
      "purl": "pkg:hackage/a50@0.5",
      "description": "Simple package name."
    },
    {
      "purl": "pkg:hackage/AC-HalfInteger@1.2.1",
      "description": "Package with mixed case and a hyphen."
    },
    {
      "purl": "pkg:hackage/3d-graphics-examples@0.0.0.2",
      "description": "Package with a name starting with a number."
    }
  ],
  "incorrect_examples": [
    {
      "purl": "pkg:hackage/namespace/a50@0.5",
      "description": "Includes a namespace component, which is prohibited.",
      "violation": "namespace_definition.requirement=prohibited"
    },
    {
      "purl": "pkg:hackage/a_50@0.5",
      "description": "Package name contains an underscore, which violates the kebab-case normalization rule.",
      "violation": "name_definition requires kebab-case format."
    },
    {
      "purl": "pkg:hackage/a50",
      "description": "Missing version component, which is required.",
      "violation": "version_definition.requirement=required"
    }
  ],
  "references": [
    {
      "title": "Hackage",
      "url": "https://hackage.haskell.org/"
    },
    {
      "title": "Cabal User Guide",
      "url": "https://cabal.readthedocs.io/en/stable/"
    }
  ],
  "metadata": {
    "last_updated": "2025-08-23"
  }
}